{"changed":true,"filter":false,"title":"AddressList.js","tooltip":"/src/components/AddressList.js","value":"import React, { Component } from \"react\";\nimport Addresses from './Addresses';\nimport WAValidator from 'wallet-address-validator';\nimport axios from 'axios';\n\n\n// var valid = WAValidator.validate('1KFzzGtDdnq5hrwxXGjwVnKzRbvf8WVxck', 'BTC');\n// if(valid)\n// \tconsole.log('This is a valid address');\n// else\n//   console.log('Address INVALID');\n  \n\nclass AddressList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      addresses: []\n    };\n    this.addAddress = this.addAddress.bind(this);\n    this.deleteAddress = this.deleteAddress.bind(this);\n    this.checkBalance = this.checkBalance.bind(this);\n  }\n  \n  bitcoinAmountCheck() {\n    this.setState(() => {\n      return {\n        addresses: []\n      };\n    });\n    const addresses = this.state.addresses.map(a => a.key);\n    \n    axios.get(\"https://blockchain.info/balance?active=\" + addresses.toString().replace(/,/g, '|') + \"&cors=true\")\n      .then(res => {\n        const data = res.data;\n        let i;\n        for (i = 0; i < addresses.length; i++) {\n          const addressBalance = data[addresses[i]].final_balance / 100000000;\n          // var address = addressesState.find(function (obj) { return obj.key === addresses[i]; });\n          const newAddress = {\n            text: addresses[i],\n            key: addresses[i],\n            cryptoAmount: addressBalance,\n            fiatAmount: addressBalance * 6000\n          };\n          this.setState((prevState) => {\n            return {\n              addresses: prevState.addresses.concat(newAddress)\n            };\n          });\n        }\n      })\n  }\n  \n  checkBalance(event) {\n    this.bitcoinAmountCheck();\n    \n    event.preventDefault();\n  }\n\n\n  addAddress(event) {\n      const addObject = this.state.addresses;\n      \n      const checkDuplicateArray = (addObject.map(a => a.key));\n      const duplicate = checkDuplicateArray.includes(this._inputElement.value);\n      if (duplicate) {\n        alert(\"you have entered a duplicte address\");\n\n      } else if (this._inputElement.value !== \"\"\n                && WAValidator.validate(this._inputElement.value))  {\n        var newAddress = {\n          text: this._inputElement.value,\n          key: this._inputElement.value,\n          cryptoAmount: 0,\n          fiatAmount: 0\n        };\n\n        this.setState((prevState) => {\n          return {\n            addresses: prevState.addresses.concat(newAddress)\n          };\n        });\n      } else {\n        alert(\"Please enter a valid address\");\n      }\n\n      this._inputElement.value = \"\";\n      \n      event.preventDefault();\n  }\n\n  deleteAddress(key) { \n    var filteredAddresses = this.state.addresses.filter(function (address) {\n      console.log(address);\n      return (address.key !== key)\n    });\n\n    console.log(\"filteredAddress\" + filteredAddresses)\n\n    this.setState({\n      addresses: filteredAddresses\n    });\n  }\n\n  render(){\n    return (\n      <div className=\"addressList\">\n        <div className=\"inputForm\">\n          <form onSubmit={this.addAddress}>\n            <input ref={(a) => this._inputElement = a}>\n            </input>\n            <button type=\"submit\">Enter a New PaperWallet</button>\n          </form>\n          <button type=\"balance\" onClick={this.checkBalance}>Check Balance</button>\n        </div>\n        <Addresses entries={this.state.addresses}\n                    delete={this.deleteAddress}/>\n      </div>\n    );\n  }\n}\n\n\nexport default AddressList;","undoManager":{"mark":98,"position":100,"stack":[[{"start":{"row":54,"column":21},"end":{"row":54,"column":22},"action":"insert","lines":["S"],"id":1591}],[{"start":{"row":54,"column":22},"end":{"row":54,"column":23},"action":"insert","lines":["t"],"id":1592}],[{"start":{"row":54,"column":23},"end":{"row":54,"column":24},"action":"insert","lines":["a"],"id":1593}],[{"start":{"row":54,"column":24},"end":{"row":54,"column":25},"action":"insert","lines":["t"],"id":1594}],[{"start":{"row":54,"column":25},"end":{"row":54,"column":26},"action":"insert","lines":["e"],"id":1595}],[{"start":{"row":54,"column":26},"end":{"row":54,"column":27},"action":"insert","lines":[" "],"id":1596}],[{"start":{"row":54,"column":27},"end":{"row":54,"column":28},"action":"insert","lines":["="],"id":1597}],[{"start":{"row":54,"column":28},"end":{"row":54,"column":29},"action":"insert","lines":[" "],"id":1598}],[{"start":{"row":54,"column":29},"end":{"row":54,"column":30},"action":"insert","lines":["t"],"id":1599}],[{"start":{"row":54,"column":30},"end":{"row":54,"column":31},"action":"insert","lines":["h"],"id":1600}],[{"start":{"row":54,"column":31},"end":{"row":54,"column":32},"action":"insert","lines":["i"],"id":1601}],[{"start":{"row":54,"column":32},"end":{"row":54,"column":33},"action":"insert","lines":["s"],"id":1602}],[{"start":{"row":54,"column":33},"end":{"row":54,"column":34},"action":"insert","lines":["."],"id":1603}],[{"start":{"row":54,"column":34},"end":{"row":54,"column":35},"action":"insert","lines":["s"],"id":1604}],[{"start":{"row":54,"column":35},"end":{"row":54,"column":36},"action":"insert","lines":["t"],"id":1605}],[{"start":{"row":54,"column":36},"end":{"row":54,"column":37},"action":"insert","lines":["a"],"id":1606}],[{"start":{"row":54,"column":37},"end":{"row":54,"column":38},"action":"insert","lines":["t"],"id":1607}],[{"start":{"row":54,"column":38},"end":{"row":54,"column":39},"action":"insert","lines":["e"],"id":1608}],[{"start":{"row":54,"column":39},"end":{"row":54,"column":40},"action":"insert","lines":["."],"id":1609}],[{"start":{"row":54,"column":40},"end":{"row":54,"column":41},"action":"insert","lines":["a"],"id":1610}],[{"start":{"row":54,"column":41},"end":{"row":54,"column":42},"action":"insert","lines":["d"],"id":1611}],[{"start":{"row":54,"column":42},"end":{"row":54,"column":43},"action":"insert","lines":["r"],"id":1612}],[{"start":{"row":54,"column":43},"end":{"row":54,"column":44},"action":"insert","lines":["e"],"id":1613}],[{"start":{"row":54,"column":43},"end":{"row":54,"column":44},"action":"remove","lines":["e"],"id":1614}],[{"start":{"row":54,"column":42},"end":{"row":54,"column":43},"action":"remove","lines":["r"],"id":1615}],[{"start":{"row":54,"column":42},"end":{"row":54,"column":43},"action":"insert","lines":["d"],"id":1616}],[{"start":{"row":54,"column":43},"end":{"row":54,"column":44},"action":"insert","lines":["e"],"id":1617}],[{"start":{"row":54,"column":43},"end":{"row":54,"column":44},"action":"remove","lines":["e"],"id":1618}],[{"start":{"row":54,"column":43},"end":{"row":54,"column":44},"action":"insert","lines":["r"],"id":1619}],[{"start":{"row":54,"column":40},"end":{"row":54,"column":44},"action":"remove","lines":["addr"],"id":1620},{"start":{"row":54,"column":40},"end":{"row":54,"column":49},"action":"insert","lines":["addresses"]}],[{"start":{"row":54,"column":49},"end":{"row":54,"column":50},"action":"insert","lines":[";"],"id":1621}],[{"start":{"row":41,"column":35},"end":{"row":41,"column":36},"action":"remove","lines":["t"],"id":1622}],[{"start":{"row":41,"column":34},"end":{"row":41,"column":35},"action":"remove","lines":["n"],"id":1623}],[{"start":{"row":41,"column":33},"end":{"row":41,"column":34},"action":"remove","lines":["e"],"id":1624}],[{"start":{"row":41,"column":32},"end":{"row":41,"column":33},"action":"remove","lines":["m"],"id":1625}],[{"start":{"row":41,"column":31},"end":{"row":41,"column":32},"action":"remove","lines":["e"],"id":1626}],[{"start":{"row":41,"column":30},"end":{"row":41,"column":31},"action":"remove","lines":["l"],"id":1627}],[{"start":{"row":41,"column":29},"end":{"row":41,"column":30},"action":"remove","lines":["E"],"id":1628}],[{"start":{"row":41,"column":28},"end":{"row":41,"column":29},"action":"remove","lines":["t"],"id":1629}],[{"start":{"row":41,"column":27},"end":{"row":41,"column":28},"action":"remove","lines":["u"],"id":1630}],[{"start":{"row":41,"column":26},"end":{"row":41,"column":27},"action":"remove","lines":["p"],"id":1631}],[{"start":{"row":41,"column":25},"end":{"row":41,"column":26},"action":"remove","lines":["n"],"id":1632}],[{"start":{"row":41,"column":24},"end":{"row":41,"column":25},"action":"remove","lines":["i"],"id":1633}],[{"start":{"row":41,"column":23},"end":{"row":41,"column":24},"action":"remove","lines":["_"],"id":1634}],[{"start":{"row":41,"column":22},"end":{"row":41,"column":23},"action":"remove","lines":["."],"id":1635}],[{"start":{"row":41,"column":21},"end":{"row":41,"column":22},"action":"remove","lines":["s"],"id":1636}],[{"start":{"row":41,"column":20},"end":{"row":41,"column":21},"action":"remove","lines":["i"],"id":1637}],[{"start":{"row":41,"column":19},"end":{"row":41,"column":20},"action":"remove","lines":["h"],"id":1638}],[{"start":{"row":41,"column":18},"end":{"row":41,"column":19},"action":"remove","lines":["t"],"id":1639}],[{"start":{"row":41,"column":18},"end":{"row":41,"column":19},"action":"insert","lines":["a"],"id":1640}],[{"start":{"row":41,"column":19},"end":{"row":41,"column":20},"action":"insert","lines":["d"],"id":1641}],[{"start":{"row":41,"column":20},"end":{"row":41,"column":21},"action":"insert","lines":["d"],"id":1642}],[{"start":{"row":41,"column":21},"end":{"row":41,"column":22},"action":"insert","lines":["r"],"id":1643}],[{"start":{"row":41,"column":22},"end":{"row":41,"column":23},"action":"insert","lines":["e"],"id":1644}],[{"start":{"row":41,"column":23},"end":{"row":41,"column":24},"action":"insert","lines":["s"],"id":1645}],[{"start":{"row":41,"column":24},"end":{"row":41,"column":25},"action":"insert","lines":["s"],"id":1646}],[{"start":{"row":41,"column":25},"end":{"row":41,"column":26},"action":"insert","lines":["e"],"id":1647}],[{"start":{"row":41,"column":26},"end":{"row":41,"column":27},"action":"insert","lines":["s"],"id":1648}],[{"start":{"row":41,"column":27},"end":{"row":41,"column":28},"action":"insert","lines":["s"],"id":1649}],[{"start":{"row":41,"column":27},"end":{"row":41,"column":28},"action":"remove","lines":["s"],"id":1650}],[{"start":{"row":41,"column":27},"end":{"row":41,"column":29},"action":"insert","lines":["[]"],"id":1651}],[{"start":{"row":41,"column":28},"end":{"row":41,"column":29},"action":"insert","lines":["i"],"id":1652}],[{"start":{"row":41,"column":35},"end":{"row":41,"column":36},"action":"remove","lines":["e"],"id":1653}],[{"start":{"row":41,"column":34},"end":{"row":41,"column":35},"action":"remove","lines":["u"],"id":1654}],[{"start":{"row":41,"column":33},"end":{"row":41,"column":34},"action":"remove","lines":["l"],"id":1655}],[{"start":{"row":41,"column":32},"end":{"row":41,"column":33},"action":"remove","lines":["a"],"id":1656}],[{"start":{"row":41,"column":31},"end":{"row":41,"column":32},"action":"remove","lines":["v"],"id":1657}],[{"start":{"row":41,"column":30},"end":{"row":41,"column":31},"action":"remove","lines":["."],"id":1658}],[{"start":{"row":42,"column":40},"end":{"row":42,"column":41},"action":"remove","lines":["e"],"id":1659}],[{"start":{"row":42,"column":39},"end":{"row":42,"column":40},"action":"remove","lines":["u"],"id":1660}],[{"start":{"row":42,"column":38},"end":{"row":42,"column":39},"action":"remove","lines":["l"],"id":1661}],[{"start":{"row":42,"column":37},"end":{"row":42,"column":38},"action":"remove","lines":["a"],"id":1662}],[{"start":{"row":42,"column":36},"end":{"row":42,"column":37},"action":"remove","lines":["v"],"id":1663}],[{"start":{"row":42,"column":35},"end":{"row":42,"column":36},"action":"remove","lines":["."],"id":1664}],[{"start":{"row":42,"column":34},"end":{"row":42,"column":35},"action":"remove","lines":["t"],"id":1665}],[{"start":{"row":42,"column":33},"end":{"row":42,"column":34},"action":"remove","lines":["n"],"id":1666}],[{"start":{"row":42,"column":32},"end":{"row":42,"column":33},"action":"remove","lines":["e"],"id":1667}],[{"start":{"row":42,"column":31},"end":{"row":42,"column":32},"action":"remove","lines":["m"],"id":1668}],[{"start":{"row":42,"column":30},"end":{"row":42,"column":31},"action":"remove","lines":["e"],"id":1669}],[{"start":{"row":42,"column":29},"end":{"row":42,"column":30},"action":"remove","lines":["l"],"id":1670}],[{"start":{"row":42,"column":28},"end":{"row":42,"column":29},"action":"remove","lines":["E"],"id":1671}],[{"start":{"row":42,"column":27},"end":{"row":42,"column":28},"action":"remove","lines":["t"],"id":1672}],[{"start":{"row":42,"column":26},"end":{"row":42,"column":27},"action":"remove","lines":["u"],"id":1673}],[{"start":{"row":42,"column":25},"end":{"row":42,"column":26},"action":"remove","lines":["p"],"id":1674}],[{"start":{"row":42,"column":24},"end":{"row":42,"column":25},"action":"remove","lines":["n"],"id":1675}],[{"start":{"row":42,"column":23},"end":{"row":42,"column":24},"action":"remove","lines":["i"],"id":1676}],[{"start":{"row":42,"column":22},"end":{"row":42,"column":23},"action":"remove","lines":["_"],"id":1677}],[{"start":{"row":42,"column":21},"end":{"row":42,"column":22},"action":"remove","lines":["."],"id":1678}],[{"start":{"row":42,"column":20},"end":{"row":42,"column":21},"action":"remove","lines":["s"],"id":1679}],[{"start":{"row":42,"column":19},"end":{"row":42,"column":20},"action":"remove","lines":["i"],"id":1680}],[{"start":{"row":42,"column":18},"end":{"row":42,"column":19},"action":"remove","lines":["h"],"id":1681}],[{"start":{"row":42,"column":17},"end":{"row":42,"column":18},"action":"remove","lines":["t"],"id":1682}],[{"start":{"row":42,"column":17},"end":{"row":42,"column":29},"action":"insert","lines":["addresses[i]"],"id":1683}],[{"start":{"row":54,"column":0},"end":{"row":56,"column":0},"action":"remove","lines":["      const addressesState = this.state.addresses;","      console.log(addressesState);",""],"id":1684}],[{"start":{"row":53,"column":0},"end":{"row":54,"column":0},"action":"remove","lines":["      ",""],"id":1685}],[{"start":{"row":56,"column":30},"end":{"row":57,"column":0},"action":"insert","lines":["",""],"id":1686},{"start":{"row":57,"column":0},"end":{"row":57,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":57,"column":4},"end":{"row":58,"column":0},"action":"insert","lines":["",""],"id":1687},{"start":{"row":58,"column":0},"end":{"row":58,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":58,"column":4},"end":{"row":59,"column":34},"action":"insert","lines":["const addressesState = this.state.addresses;","      console.log(addressesState);"],"id":1688}],[{"start":{"row":59,"column":0},"end":{"row":59,"column":2},"action":"remove","lines":["  "],"id":1689}],[{"start":{"row":58,"column":0},"end":{"row":60,"column":0},"action":"remove","lines":["    const addressesState = this.state.addresses;","    console.log(addressesState);",""],"id":1690}],[{"start":{"row":58,"column":0},"end":{"row":59,"column":0},"action":"remove","lines":["    ",""],"id":1691}]]},"ace":{"folds":[],"scrolltop":544.921875,"scrollleft":0,"selection":{"start":{"row":58,"column":0},"end":{"row":58,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":28,"state":"no_regex","mode":"ace/mode/javascript"}},"timestamp":1539154977359}